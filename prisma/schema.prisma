datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(cuid())
  email String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  password Password?
}

model Password {
  hash String

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique
}

model Customer {
  id    String @id @default(cuid())
  email String
  name  String
  phone String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  mulchOrders MulchOrder[]
}

model MulchOrder {
  id           String  @id @default(cuid())
  quantity     Int
  pricePerUnit Float
  color        String // enum - one of 'BLACK' or 'BROWN'
  orderType    String // enum - one of 'SPREAD' or 'DELIVERY'
  note         String?

  neighborhood  String // enum
  streetAddress String

  status              String  @default("PENDING") // enum - one of 'PENDING', 'PAID', 'FULFILLED', 'CANCELLED'
  paypalOrderId       String?
  paypalPaymentSource String?
  paypalPayerId       String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  customer   Customer @relation(fields: [customerId], references: [id], onDelete: Restrict, onUpdate: Cascade)
  customerId String
}
